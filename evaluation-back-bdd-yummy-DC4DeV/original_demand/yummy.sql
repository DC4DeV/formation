-- MySQL Script generated by MySQL Workbench
-- jeu. 17 mai 2018 12:19:49 CEST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`User` (
  `id` INT(999) NOT NULL,
  `nick` VARCHAR(45) NULL,
  `first` VARCHAR(45) NULL,
  `last` VARCHAR(45) NULL,
  `age` INT NULL,
  `mail` VARCHAR(100) NULL,
  `adress` VARCHAR(200) NULL,
  `zip` INT NULL,
  `town` VARCHAR(45) NULL,
  `country` VARCHAR(45) NULL,
  `phone` VARCHAR(45) NULL,
  UNIQUE INDEX `idUser_UNIQUE` (`id` ASC),
  UNIQUE INDEX `nick_UNIQUE` (`nick` ASC),
  UNIQUE INDEX `mail_UNIQUE` (`mail` ASC),
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Recipe`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Recipe` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(200) NULL,
  `picture` VARCHAR(45) NULL,
  `description` TEXT NULL,
  `instruction` TEXT NULL,
  `origin` VARCHAR(45) NULL,
  `User_id` INT(999) NOT NULL,
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_Recipe_User_idx` (`User_id` ASC),
  CONSTRAINT `fk_Recipe_User`
    FOREIGN KEY (`User_id`)
    REFERENCES `mydb`.`User` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Menu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Menu` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(100) NULL,
  `description` TEXT NULL,
  `origin` VARCHAR(45) NULL,
  `User_id` INT(999) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  INDEX `fk_Menu_User1_idx` (`User_id` ASC),
  CONSTRAINT `fk_Menu_User1`
    FOREIGN KEY (`User_id`)
    REFERENCES `mydb`.`User` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Nature`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Nature` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Ingredient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Ingredient` (
  `id` INT(999) UNSIGNED NOT NULL,
  `name` VARCHAR(45) NULL,
  `firm` VARCHAR(45) NULL,
  `price` INT NULL,
  `Nature_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  INDEX `fk_Ingredient_Nature1_idx` (`Nature_id` ASC),
  CONSTRAINT `fk_Ingredient_Nature1`
    FOREIGN KEY (`Nature_id`)
    REFERENCES `mydb`.`Nature` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Theme`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Theme` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Unit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Unit` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Allergen`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Allergen` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Package`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Package` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Type` (
  `id` INT(999) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Recipe_has_Ingredient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Recipe_has_Ingredient` (
  `Recipe_id` INT(999) UNSIGNED NOT NULL,
  `Ingredient_id` INT(999) UNSIGNED NOT NULL,
  `Unit_id` INT(999) UNSIGNED NOT NULL,
  `quantity` VARCHAR(45) NULL,
  PRIMARY KEY (`Recipe_id`, `Ingredient_id`),
  INDEX `fk_Recipe_has_Ingredient_Ingredient1_idx` (`Ingredient_id` ASC),
  INDEX `fk_Recipe_has_Ingredient_Recipe1_idx` (`Recipe_id` ASC),
  INDEX `fk_Recipe_has_Ingredient_Unit1_idx` (`Unit_id` ASC),
  CONSTRAINT `fk_Recipe_has_Ingredient_Recipe1`
    FOREIGN KEY (`Recipe_id`)
    REFERENCES `mydb`.`Recipe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recipe_has_Ingredient_Ingredient1`
    FOREIGN KEY (`Ingredient_id`)
    REFERENCES `mydb`.`Ingredient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recipe_has_Ingredient_Unit1`
    FOREIGN KEY (`Unit_id`)
    REFERENCES `mydb`.`Unit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Recipe_has_Type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Recipe_has_Type` (
  `Recipe_id` INT(999) UNSIGNED NOT NULL,
  `Type_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Recipe_id`, `Type_id`),
  INDEX `fk_Recipe_has_Type_Type1_idx` (`Type_id` ASC),
  INDEX `fk_Recipe_has_Type_Recipe1_idx` (`Recipe_id` ASC),
  CONSTRAINT `fk_Recipe_has_Type_Recipe1`
    FOREIGN KEY (`Recipe_id`)
    REFERENCES `mydb`.`Recipe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recipe_has_Type_Type1`
    FOREIGN KEY (`Type_id`)
    REFERENCES `mydb`.`Type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Recipe_has_Menu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Recipe_has_Menu` (
  `Recipe_id` INT(999) UNSIGNED NOT NULL,
  `Menu_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Recipe_id`, `Menu_id`),
  INDEX `fk_Recipe_has_Menu_Menu1_idx` (`Menu_id` ASC),
  INDEX `fk_Recipe_has_Menu_Recipe1_idx` (`Recipe_id` ASC),
  CONSTRAINT `fk_Recipe_has_Menu_Recipe1`
    FOREIGN KEY (`Recipe_id`)
    REFERENCES `mydb`.`Recipe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recipe_has_Menu_Menu1`
    FOREIGN KEY (`Menu_id`)
    REFERENCES `mydb`.`Menu` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Menu_has_Theme`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Menu_has_Theme` (
  `Menu_id` INT(999) UNSIGNED NOT NULL,
  `Theme_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Menu_id`, `Theme_id`),
  INDEX `fk_Menu_has_Theme_Theme1_idx` (`Theme_id` ASC),
  INDEX `fk_Menu_has_Theme_Menu1_idx` (`Menu_id` ASC),
  CONSTRAINT `fk_Menu_has_Theme_Menu1`
    FOREIGN KEY (`Menu_id`)
    REFERENCES `mydb`.`Menu` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Menu_has_Theme_Theme1`
    FOREIGN KEY (`Theme_id`)
    REFERENCES `mydb`.`Theme` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Recipe_has_Theme`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Recipe_has_Theme` (
  `Recipe_id` INT(999) UNSIGNED NOT NULL,
  `Theme_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Recipe_id`, `Theme_id`),
  INDEX `fk_Recipe_has_Theme_Theme1_idx` (`Theme_id` ASC),
  INDEX `fk_Recipe_has_Theme_Recipe1_idx` (`Recipe_id` ASC),
  CONSTRAINT `fk_Recipe_has_Theme_Recipe1`
    FOREIGN KEY (`Recipe_id`)
    REFERENCES `mydb`.`Recipe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Recipe_has_Theme_Theme1`
    FOREIGN KEY (`Theme_id`)
    REFERENCES `mydb`.`Theme` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Type_has_Menu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Type_has_Menu` (
  `Type_id` INT(999) UNSIGNED NOT NULL,
  `Menu_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Type_id`, `Menu_id`),
  INDEX `fk_Type_has_Menu_Menu1_idx` (`Menu_id` ASC),
  INDEX `fk_Type_has_Menu_Type1_idx` (`Type_id` ASC),
  CONSTRAINT `fk_Type_has_Menu_Type1`
    FOREIGN KEY (`Type_id`)
    REFERENCES `mydb`.`Type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Type_has_Menu_Menu1`
    FOREIGN KEY (`Menu_id`)
    REFERENCES `mydb`.`Menu` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Ingredient_has_Package`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Ingredient_has_Package` (
  `Ingredient_id` INT(999) UNSIGNED NOT NULL,
  `Package_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Ingredient_id`, `Package_id`),
  INDEX `fk_Ingredient_has_Package_Package1_idx` (`Package_id` ASC),
  INDEX `fk_Ingredient_has_Package_Ingredient1_idx` (`Ingredient_id` ASC),
  CONSTRAINT `fk_Ingredient_has_Package_Ingredient1`
    FOREIGN KEY (`Ingredient_id`)
    REFERENCES `mydb`.`Ingredient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ingredient_has_Package_Package1`
    FOREIGN KEY (`Package_id`)
    REFERENCES `mydb`.`Package` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Ingredient_has_Allergen`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Ingredient_has_Allergen` (
  `Ingredient_id` INT(999) UNSIGNED NOT NULL,
  `Allergen_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`Ingredient_id`, `Allergen_id`),
  INDEX `fk_Ingredient_has_Allergen_Allergen1_idx` (`Allergen_id` ASC),
  INDEX `fk_Ingredient_has_Allergen_Ingredient1_idx` (`Ingredient_id` ASC),
  CONSTRAINT `fk_Ingredient_has_Allergen_Ingredient1`
    FOREIGN KEY (`Ingredient_id`)
    REFERENCES `mydb`.`Ingredient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ingredient_has_Allergen_Allergen1`
    FOREIGN KEY (`Allergen_id`)
    REFERENCES `mydb`.`Allergen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`User_favorite_Recipe`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`User_favorite_Recipe` (
  `User_id` INT(999) NOT NULL,
  `Recipe_id` INT(999) UNSIGNED NOT NULL,
  PRIMARY KEY (`User_id`, `Recipe_id`),
  INDEX `fk_User_has_Recipe_Recipe1_idx` (`Recipe_id` ASC),
  INDEX `fk_User_has_Recipe_User1_idx` (`User_id` ASC),
  CONSTRAINT `fk_User_has_Recipe_User1`
    FOREIGN KEY (`User_id`)
    REFERENCES `mydb`.`User` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_User_has_Recipe_Recipe1`
    FOREIGN KEY (`Recipe_id`)
    REFERENCES `mydb`.`Recipe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
